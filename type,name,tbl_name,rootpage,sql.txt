type,name,tbl_name,rootpage,sql
table,sqlite_sequence,sqlite_sequence,4,"CREATE TABLE sqlite_sequence(name,seq)"
table,Roles,Roles,5,"CREATE TABLE Roles (
    ID_Rol INTEGER PRIMARY KEY AUTOINCREMENT,
    Nombre_Rol TEXT NOT NULL
)"
table,Usuarios,Usuarios,6,"CREATE TABLE Usuarios (
    ID_Usuario INTEGER PRIMARY KEY AUTOINCREMENT,
    NombreUsuario TEXT UNIQUE NOT NULL,
    ContrasenaHash TEXT NOT NULL,
    Rol_ID INTEGER,
    Estado INTEGER,
    Fecha_Creacion DATE,
    FOREIGN KEY (Rol_ID) REFERENCES Roles(ID_Rol)
)"
index,sqlite_autoindex_Usuarios_1,Usuarios,7,NULL
table,Metodos_Pago,Metodos_Pago,9,"CREATE TABLE Metodos_Pago (
    ID_MetodoPago INTEGER PRIMARY KEY AUTOINCREMENT,
    Nombre TEXT NOT NULL
)"
table,Pagos_CuentasCobrar,Pagos_CuentasCobrar,10,"CREATE TABLE Pagos_CuentasCobrar (
    ID_Pago INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_Movimiento INTEGER,
    Fecha DATETIME,
    Monto NUMERIC(12,2),
    ID_MetodoPago INTEGER,
    FOREIGN KEY (ID_Movimiento) REFERENCES Detalle_Cuentas_Por_Cobrar(ID_MOVIMIENTO),
    FOREIGN KEY (ID_MetodoPago) REFERENCES Metodos_Pago(ID_MetodoPago)
)"
table,Pagos_CuentasPagar,Pagos_CuentasPagar,11,"CREATE TABLE Pagos_CuentasPagar (
    ID_Pago INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_Movimiento INTEGER,
    Fecha DATETIME,
    Monto NUMERIC(12,2),
    ID_MetodoPago INTEGER,
    FOREIGN KEY (ID_Movimiento) REFERENCES Cuentas_Por_Pagar(ID_MOVIMIENTO),
    FOREIGN KEY (ID_MetodoPago) REFERENCES Metodos_Pago(ID_MetodoPago)
)"
table,Bancos,Bancos,12,"CREATE TABLE Bancos (
    ID_Banco INTEGER PRIMARY KEY AUTOINCREMENT,
    Nombre TEXT,
    Cuenta TEXT
)"
table,Configuracion,Configuracion,13,"CREATE TABLE Configuracion (
    ID_Config INTEGER PRIMARY KEY AUTOINCREMENT,
    NombreParametro TEXT,
    ValorParametro TEXT
)"
table,Clientes,Clientes,14,"CREATE TABLE Clientes (
    ID_Cliente INTEGER PRIMARY KEY AUTOINCREMENT,
    Nombre TEXT NOT NULL,
    Telefono TEXT,
    Direccion TEXT,
    RUC_CEDULA TEXT
)"
table,Proveedores,Proveedores,15,"CREATE TABLE Proveedores (
    ID_Proveedor INTEGER PRIMARY KEY AUTOINCREMENT,
    Nombre TEXT NOT NULL,
    Telefono TEXT,
    Direccion TEXT,
    RUC_CEDULA TEXT
)"
table,Empresa,Empresa,16,"CREATE TABLE Empresa (
    ID_Empresa INTEGER PRIMARY KEY AUTOINCREMENT,
    Descripcion TEXT
)"
table,Catalogo_Movimientos,Catalogo_Movimientos,17,"CREATE TABLE Catalogo_Movimientos (
    ID_TipoMovimiento INTEGER PRIMARY KEY AUTOINCREMENT,
    Descripcion TEXT,
    Adicion TEXT,
    Letra TEXT
)"
table,Unidades_Medida,Unidades_Medida,19,"CREATE TABLE Unidades_Medida (
    ID_Unidad INTEGER PRIMARY KEY AUTOINCREMENT,
    Descripcion TEXT NOT NULL,
    Abreviatura TEXT
)"
table,Familia,Familia,20,"CREATE TABLE Familia (
    ID_Familia INTEGER PRIMARY KEY AUTOINCREMENT,
    Descripcion TEXT NOT NULL
)"
table,Tipo_Producto,Tipo_Producto,21,"CREATE TABLE Tipo_Producto (
    ID_TipoProducto INTEGER PRIMARY KEY AUTOINCREMENT,
    Descripcion TEXT NOT NULL
)"
table,Detalle_Facturacion,Detalle_Facturacion,25,"CREATE TABLE Detalle_Facturacion (
    ID_Detalle INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_Factura INTEGER,
    ID_Producto INTEGER,
    Cantidad NUMERIC,
    Costo NUMERIC,
    Descuento NUMERIC,
    IVA NUMERIC,
    Total NUMERIC,
    FOREIGN KEY (ID_Factura) REFERENCES Facturacion(ID_Movimiento),
    FOREIGN KEY (ID_Producto) REFERENCES Productos(ID_Producto)
)"
table,Detalle_Movimiento_Inventario,Detalle_Movimiento_Inventario,27,"CREATE TABLE Detalle_Movimiento_Inventario (
    ID_Detalle INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_Movimiento INTEGER,
    ID_TipoMovimiento INTEGER,
    ID_Producto INTEGER,
    Cantidad INTEGER,
    Costo NUMERIC,
    IVA NUMERIC,
    Descuento NUMERIC,
    Costo_Total NUMERIC,
    Saldo NUMERIC,
    FOREIGN KEY (ID_Movimiento) REFERENCES Movimientos_Inventario(ID_Movimiento),
    FOREIGN KEY (ID_Producto) REFERENCES Productos(ID_Producto)
)"
table,Gastos,Gastos,30,"CREATE TABLE Gastos (
    ID_Movimiento INTEGER PRIMARY KEY AUTOINCREMENT,
    Fecha DATE,
    Observacion TEXT,
    Monto NUMERIC,
    ID_Empresa INTEGER,
    FOREIGN KEY (ID_Empresa) REFERENCES Empresa(ID_Empresa)
)"
table,Bodegas,Bodegas,31,"CREATE TABLE Bodegas (
    ID_Bodega INTEGER PRIMARY KEY AUTOINCREMENT,
    Nombre TEXT NOT NULL,
    Ubicacion TEXT
)"
table,Vehiculos,Vehiculos,34,"CREATE TABLE Vehiculos (
    ID_Vehiculo INTEGER PRIMARY KEY AUTOINCREMENT,
    Placa TEXT NOT NULL,
    Marca TEXT,
    Modelo TEXT,
    Año INTEGER,
    Color TEXT,
    NumeroChasis TEXT,
    NumeroMotor TEXT,
    Estado INTEGER DEFAULT 1  -- 1=Activo, 0=Inactivo/Baja
)"
table,Mantenimiento_Vehiculo,Mantenimiento_Vehiculo,37,"CREATE TABLE Mantenimiento_Vehiculo (
    ID_Mantenimiento INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_Vehiculo INTEGER,
    Fecha DATE,
    Tipo TEXT, -- Ej: Preventivo, Correctivo, Revisión, Cambio de Aceite, etc.
    Descripcion TEXT,
    Costo NUMERIC,
    Proveedor TEXT,
    Kilometraje NUMERIC,
    Observacion TEXT,
    FOREIGN KEY (ID_Vehiculo) REFERENCES Vehiculos(ID_Vehiculo)
)"
table,Conductores,Conductores,38,"CREATE TABLE Conductores (
    ID_Conductor INTEGER PRIMARY KEY AUTOINCREMENT,
    Nombre TEXT,
    Cedula TEXT,
    Telefono TEXT,
    Licencia TEXT
)"
table,Vehiculo_Conductor,Vehiculo_Conductor,39,"CREATE TABLE Vehiculo_Conductor (
    ID_Vehiculo INTEGER,
    ID_Conductor INTEGER,
    FechaAsignacion DATE,
    PRIMARY KEY (ID_Vehiculo, ID_Conductor, FechaAsignacion),
    FOREIGN KEY (ID_Vehiculo) REFERENCES Vehiculos(ID_Vehiculo),
    FOREIGN KEY (ID_Conductor) REFERENCES Conductores(ID_Conductor)
)"
index,sqlite_autoindex_Vehiculo_Conductor_1,Vehiculo_Conductor,40,NULL
table,Rutas,Rutas,41,"CREATE TABLE Rutas (
    ID_Ruta INTEGER PRIMARY KEY AUTOINCREMENT,
    Nombre TEXT NOT NULL,
    Descripcion TEXT
)"
table,Vehiculo_Ruta,Vehiculo_Ruta,42,"CREATE TABLE Vehiculo_Ruta (
    ID_Vehiculo INTEGER,
    ID_Ruta INTEGER,
    FechaAsignacion DATE,
    PRIMARY KEY (ID_Vehiculo, ID_Ruta, FechaAsignacion),
    FOREIGN KEY (ID_Vehiculo) REFERENCES Vehiculos(ID_Vehiculo),
    FOREIGN KEY (ID_Ruta) REFERENCES Rutas(ID_Ruta)
)"
index,sqlite_autoindex_Vehiculo_Ruta_1,Vehiculo_Ruta,43,NULL
table,Gastos_Combustible,Gastos_Combustible,44,"CREATE TABLE Gastos_Combustible (
    ID_Gasto INTEGER PRIMARY KEY AUTOINCREMENT,
    Fecha DATE NOT NULL,
    ID_Vehiculo INTEGER NOT NULL,
    Monto NUMERIC NOT NULL,
    Litros NUMERIC,
    Kilometraje NUMERIC,
    Observacion TEXT,
    ID_Bodega INTEGER,
    ID_Empresa INTEGER,
    FOREIGN KEY (ID_Vehiculo) REFERENCES Vehiculos(ID_Vehiculo),
    FOREIGN KEY (ID_Bodega) REFERENCES Bodegas(ID_Bodega),
    FOREIGN KEY (ID_Empresa) REFERENCES Empresa(ID_Empresa)
)"
table,Facturacion,Facturacion,2,"CREATE TABLE Facturacion (
    ID_Factura INTEGER PRIMARY KEY AUTOINCREMENT,
    Fecha DATE NOT NULL,
    IDCliente INTEGER NOT NULL,
    Credito_Contado INTEGER,
    Observacion TEXT,
    ID_Empresa INTEGER NOT NULL,
    FOREIGN KEY (IDCliente) REFERENCES Clientes(ID_Cliente),
    FOREIGN KEY (ID_Empresa) REFERENCES Empresa(ID_Empresa)
)"
table,Detalle_Cuentas_Por_Cobrar,Detalle_Cuentas_Por_Cobrar,3,"CREATE TABLE Detalle_Cuentas_Por_Cobrar (
    ID_Cobro INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_Movimiento INTEGER NOT NULL,
    Fecha DATE,
    ID_Cliente INTEGER NOT NULL,
    Num_Documento TEXT,
    Observacion TEXT,
    Fecha_Vencimiento DATE,
    Tipo_Movimiento INTEGER,
    Monto_Movimiento NUMERIC,
    IVA NUMERIC,
    Retencion NUMERIC,
    ID_Empresa INTEGER,
    FOREIGN KEY (ID_Cliente) REFERENCES Clientes(ID_Cliente),
    FOREIGN KEY (ID_Empresa) REFERENCES Empresa(ID_Empresa)
)"
table,Cuentas_Por_Pagar,Cuentas_Por_Pagar,8,"CREATE TABLE Cuentas_Por_Pagar (
    ID_Cuenta INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_Movimiento INTEGER,
    Fecha DATE,
    ID_Proveedor INTEGER,
    Num_Documento TEXT,
    Observacion TEXT,
    Fecha_Vencimiento DATE,
    Tipo_Movimiento INTEGER,
    Monto_Movimiento NUMERIC,
    IVA NUMERIC,
    Retencion NUMERIC,
    ID_Empresa INTEGER,
    FOREIGN KEY (ID_Proveedor) REFERENCES Proveedores(ID_Proveedor),
    FOREIGN KEY (ID_Empresa) REFERENCES Empresa(ID_Empresa)
)"
table,Movimientos_Inventario,Movimientos_Inventario,18,"CREATE TABLE Movimientos_Inventario (
    ID_Movimiento INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_TipoMovimiento INTEGER,
    N_Factura TEXT,
    Contado_Credito INTEGER,
    Fecha DATE,
    ID_Proveedor INTEGER,
    Observacion TEXT,
    IVA NUMERIC,
    Retencion NUMERIC,
    ID_Empresa INTEGER,
    ID_Bodega INTEGER,
    ID_Ruta INTEGER,
    UbicacionEntrega TEXT,
    FOREIGN KEY (ID_TipoMovimiento) REFERENCES Catalogo_Movimientos(ID_TipoMovimiento),
    FOREIGN KEY (ID_Proveedor) REFERENCES Proveedores(ID_Proveedor),
    FOREIGN KEY (ID_Empresa) REFERENCES Empresa(ID_Empresa),
    FOREIGN KEY (ID_Bodega) REFERENCES Bodegas(ID_Bodega),
    FOREIGN KEY (ID_Ruta) REFERENCES Rutas(ID_Ruta)
)"
table,Productos,Productos,23,"CREATE TABLE Productos (
    ID_Producto INTEGER PRIMARY KEY AUTOINCREMENT,
    COD_Producto TEXT,
    Descripcion TEXT NOT NULL,
    Unidad_Medida INTEGER,
    Existencias NUMERIC DEFAULT 0,
    Estado INTEGER DEFAULT 1,
    Familia INTEGER,
    Costo_Promedio NUMERIC,
    IVA INTEGER DEFAULT 0,
    Tipo INTEGER,
    Precio_Venta NUMERIC,
    ID_Empresa INTEGER,
    Fecha_Creacion DATE DEFAULT CURRENT_DATE,
    Usuario_Creador INTEGER,
    FOREIGN KEY (Unidad_Medida) REFERENCES Unidades_Medida(ID_Unidad),
    FOREIGN KEY (Familia) REFERENCES Familia(ID_Familia),
    FOREIGN KEY (Tipo) REFERENCES Tipo_Producto(ID_TipoProducto),
    FOREIGN KEY (ID_Empresa) REFERENCES Empresa(ID_Empresa)
)"
table,Bitacora,Bitacora,26,"CREATE TABLE Bitacora (
    ID_Bitacora INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_Usuario INTEGER,
    Fecha DATETIME DEFAULT CURRENT_TIMESTAMP,
    Modulo TEXT,
    Accion TEXT,
    IP_Acceso TEXT,
    FOREIGN KEY (ID_Usuario) REFERENCES Usuarios(ID_Usuario)
)"
table,Inventario_Bodega,Inventario_Bodega,28,"CREATE TABLE Inventario_Bodega (
    ID_Bodega INTEGER,
    ID_Producto INTEGER,
    Existencias NUMERIC DEFAULT 0,
    PRIMARY KEY (ID_Bodega, ID_Producto),
    FOREIGN KEY (ID_Bodega) REFERENCES Bodegas(ID_Bodega),
    FOREIGN KEY (ID_Producto) REFERENCES Productos(ID_Producto)
)"
index,sqlite_autoindex_Inventario_Bodega_1,Inventario_Bodega,29,NULL
